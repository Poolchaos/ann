<template>
  articles
  
  <div if.bind="dataStore.isAdmin">
    <button click.trigger="navToCreateArticle()">Create New Article</button>
  </div>

  <div repeat.for="article of articles">
    <div>Name: ${article.name}</div>
    <div>Category: ${article.category}</div>
    <div>Content: ${article.content}</div>
    <div>
      Files: ${article.files.length === 0 ? '0 files' : ''}
      <div repeat.for="file of article.files">
        <button
          click.trigger="playAudio(file, $index)">
          Attachment ${$index}
        </button>
        <audio id="js-audio-${$index}"></audio>
      </div>
    </div>
    <button if.bind="dataStore.isAdmin"
      click.trigger="activateArticle(article._id)">
      Activate Article
    </button>
    <button if.bind="dataStore.isUser"
      click.trigger="addToCart(article)">
      Add to cart
    </button>
    <hr/>
  </div>
  <div if.bind="cart.length > 0 && dataStore.isUser">
    <h3>Cart</h3>
    <div repeat.for="item of cart">
      <div>Name: ${item.name}</div>
      <div>Category: ${item.category}</div>
      <hr/>
    </div>
    <button if.bind="dataStore.isUser"
      click.trigger="checkout()">
      Checkout
    </button>
  </div>
</template>