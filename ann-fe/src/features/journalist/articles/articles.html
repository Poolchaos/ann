<template>
  <h4>articles</h4>
  <div class="articles">
    <div>
      <button click.trigger="goToDashboard()">Back</button>
      <button if.bind="dataStore.isJournalist" click.trigger="goToCreateArticle()">Create New Article</button>
    </div>

    <div repeat.for="article of articles" class="item" class.bind="article.selected ? 'is-selected' : ''">
      <div class="col">
        <img src.bind="'../../../../icon-' + article.category + '.png'" width="50px" height="50px" />
      </div>
      <div class="col">
        <div>Name: ${article.name}</div>
        <div>Content: ${article.content}</div>
        <div>
          Files: ${article.files.length === 0 ? '0 files' : ''}
          <div repeat.for="file of article.files">
            <button
              click.trigger="playAudio(file, $parent.$index, $index)">
              Attachment ${$index}
            </button>
            <audio id="js-audio-${$parent.$index}-${$index}"></audio>
          </div>
        </div>
      </div>
      <div class="col actions right">
        <button if.bind="dataStore.isJournalist"
          click.trigger="editArticle(article._id)">
          Edit Article
        </button>
        <button if.bind="dataStore.isJournalist"
          click.trigger="removeArticle(article)">
          Remove Article
        </button>
        <button if.bind="dataStore.isAdmin"
          click.trigger="activateArticle(article._id)">
          Activate Article
        </button>
        <button if.bind="dataStore.isUser && !article.selected"
          click.trigger="addToCart(article)">
          Add to cart
        </button>
        <button if.bind="dataStore.isUser && article.selected"
          click.trigger="removeFromCart(article)">
          Remove from cart
        </button>
      </div>
    </div>
  </div>
</template>